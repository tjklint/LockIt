<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="ComfuritySolutions.Views.HomePage"
             BackgroundColor="{StaticResource BackgroundColor}">

    <Grid RowDefinitions="Auto,*,Auto" Padding="20">

        <!-- ðŸ” Top AppBar -->
        <Grid Grid.Row="0" ColumnDefinitions="*,Auto,Auto" Margin="0,30,0,40">
            <Label Text="comfurity"
                   FontSize="45"
                   FontAttributes="Bold"
                   TextColor="{StaticResource PrimaryColor}"
                   VerticalOptions="Center" />

            <ImageButton Source="person.svg"
                         WidthRequest="24"
                         HeightRequest="24"
                         BackgroundColor="Transparent"
                         Command="{Binding NavigateCommand}"
                         CommandParameter="Profile"
                         Grid.Column="1" />

            <ImageButton Source="settings.svg"
                         WidthRequest="24"
                         HeightRequest="24"
                         BackgroundColor="Transparent"
                         Command="{Binding NavigateCommand}"
                         CommandParameter="Settings"
                         Grid.Column="2"
                         Margin="10,0,0,0" />
        </Grid>

        <!-- ðŸ‘‹ Welcome and Activity -->
        <ScrollView Grid.Row="1">
            <VerticalStackLayout Spacing="15">

                <Label Text="{Binding WelcomeMessage}"
                       Style="{StaticResource TitleLabel}"
                       HorizontalOptions="Center" />

                <Label Text="What's been happening:"
                       Style="{StaticResource SectionTitle}" />

                <!-- ðŸ›¡ï¸ Security Section -->
                <Frame BackgroundColor="{StaticResource CardColor}"
                       CornerRadius="15"
                       Padding="10"
                       HasShadow="True">
                    <StackLayout>
                        <Label Text="Security"
                               Style="{StaticResource SectionTitle}" />
                        <CollectionView ItemsSource="{Binding SecurityAlerts}">
                            <CollectionView.ItemTemplate>
                                <DataTemplate>
                                    <Label Text="â€¢ {Binding AlertMessage}"
                                           Style="{StaticResource AlertText}" />
                                </DataTemplate>
                            </CollectionView.ItemTemplate>
                        </CollectionView>
                    </StackLayout>
                </Frame>

                <!-- ðŸŒ¡ï¸ Comfort Section -->
                <Frame BackgroundColor="{StaticResource CardColor}"
                       CornerRadius="15"
                       Padding="10"
                       HasShadow="True">
                    <StackLayout>
                        <Label Text="Comfort"
                               Style="{StaticResource SectionTitle}" />
                        <CollectionView ItemsSource="{Binding ComfortAlerts}">
                            <CollectionView.ItemTemplate>
                                <DataTemplate>
                                    <Label Text="â€¢ {Binding AlertMessage}"
                                           Style="{StaticResource AlertText}" />
                                </DataTemplate>
                            </CollectionView.ItemTemplate>
                        </CollectionView>
                    </StackLayout>
                </Frame>
            </VerticalStackLayout>
        </ScrollView>

        <!-- Bottom Navigation Bar -->
        <Grid Grid.Row="2"
              ColumnDefinitions="*,*,*"
              BackgroundColor="White"
              Padding="0,10"
              HeightRequest="70"
              VerticalOptions="End">

            <!-- Security Tab -->
            <StackLayout Grid.Column="0" HorizontalOptions="Center">
                <Image Source="{x:FontImage Shield}" WidthRequest="24" HeightRequest="24" />
                <Label Text="Security" FontSize="12" TextColor="{StaticResource TextSecondary}" />
                <Button Command="{Binding NavigateCommand}"
                        CommandParameter="Security"
                        BackgroundColor="Transparent"
                        Opacity="0"
                        WidthRequest="80"
                        HeightRequest="60" />
            </StackLayout>

            <!-- Home Tab (Emphasized) -->
            <StackLayout Grid.Column="1" HorizontalOptions="Center">
                <Image Source="{x:FontImage Home}" WidthRequest="30" HeightRequest="30" />
                <Label Text="Home" FontSize="13"
                       FontAttributes="Bold"
                       TextColor="{StaticResource PrimaryColor}" />
                <Button BackgroundColor="Transparent"
                        Opacity="0"
                        WidthRequest="80"
                        HeightRequest="60" />
            </StackLayout>

            <!-- Comfort Tab -->
            <StackLayout Grid.Column="2" HorizontalOptions="Center">
                <Image Source="{x:FontImage Thermometer}" WidthRequest="24" HeightRequest="24" />
                <Label Text="Comfort" FontSize="12" TextColor="{StaticResource TextSecondary}" />
                <Button Command="{Binding NavigateCommand}"
                        CommandParameter="Comfort"
                        BackgroundColor="Transparent"
                        Opacity="0"
                        WidthRequest="80"
                        HeightRequest="60" />
            </StackLayout>
        </Grid>
    </Grid>
</ContentPage>